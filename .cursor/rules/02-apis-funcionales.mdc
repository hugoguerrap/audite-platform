---
alwaysApply: true
---
# APIs Funcionales de AuditE

## ‚úÖ ENDPOINTS QUE FUNCIONAN 100%

### üéØ Autodiagn√≥stico (Flujo Principal)
```typescript
// URLs en [src/config/api.ts](mdc:audite-frontend-explorer/src/config/api.ts)
GET  /autodiagnostico/preguntas                    // Cargar preguntas din√°micas
POST /autodiagnostico/responder                    // Enviar respuestas usuario
GET  /autodiagnostico/sugerencias/{sessionId}      // Obtener sugerencias
GET  /autodiagnostico/sesion/{sessionId}           // Estado de sesi√≥n
```

### üëë Panel Administraci√≥n
```typescript
// Login admin
POST /admin/auth/login                             // Autenticaci√≥n admin
POST /admin/auth/verify                            // Verificar token
POST /admin/auth/refresh                           // Renovar token

// Gesti√≥n de preguntas
GET    /autodiagnostico/admin/preguntas            // Listar preguntas
POST   /autodiagnostico/admin/preguntas            // Crear pregunta
PUT    /autodiagnostico/admin/preguntas/{id}       // Editar pregunta
DELETE /autodiagnostico/admin/preguntas/{id}       // Eliminar pregunta

// An√°lisis y estad√≠sticas
GET /autodiagnostico/admin/respuestas              // Ver respuestas usuarios
GET /autodiagnostico/admin/estadisticas            // M√©tricas del sistema
```

### üîê Autenticaci√≥n Usuario (Opcional)
```typescript
POST /auth/token                                   // Login usuario
POST /auth/register                                // Registro usuario
GET  /auth/me                                      // Info usuario actual
```

### üìä Auditor√≠as (Si usuario registrado)
```typescript
// Auditor√≠as b√°sicas
GET    /auditoria-basica/                          // Listar auditor√≠as
POST   /auditoria-basica/                          // Crear auditor√≠a
GET    /auditoria-basica/{id}                      // Detalles auditor√≠a
PUT    /auditoria-basica/{id}                      // Actualizar
DELETE /auditoria-basica/{id}                      // Eliminar

// Auditor√≠as agro
GET    /auditoria-agro/                            // Listar auditor√≠as agro
POST   /auditoria-agro/                            // Crear auditor√≠a agro
GET    /auditoria-agro/{id}                        // Detalles auditor√≠a
PUT    /auditoria-agro/{id}                        // Actualizar
DELETE /auditoria-agro/{id}                        // Eliminar
```

## ‚ùå ENDPOINTS QUE NO FUNCIONAN (NO USAR)

### üö´ Diagn√≥stico de Feria (URLs incorrectas)
```typescript
// Estas URLs en [src/lib/legacyApi.ts](mdc:audite-frontend-explorer/src/lib/legacyApi.ts) est√°n ROTAS:
‚ùå /feria/iniciar-contacto/                        // NO EXISTE
‚ùå /feria/completar-diagnostico/                   // NO EXISTE  
‚ùå /feria/buscar-diagnostico/{accessCode}          // NO EXISTE
‚ùå /feria/resultados/{diagnosticoId}               // NO EXISTE

// Las URLs correctas del backend son:
‚úÖ POST /api/diagnosticos-feria/                   // Pero NO se usan
‚úÖ GET  /api/diagnosticos-feria/{id}               // Pero NO se usan
```

## üîë REGLA CLAVE
**SI NECESITAS AGREGAR FUNCIONALIDAD:**
1. **Usa solo las APIs que est√°n en esta lista ‚úÖ**
2. **NO toques nada de `/feria/*` o `feriaService`**
3. **Todas las URLs deben estar definidas en** [src/config/api.ts](mdc:audite-frontend-explorer/src/config/api.ts)
4. **Si necesitas nueva API, cr√©ala siguiendo el patr√≥n del autodiagn√≥stico**
